<!DOCTYPE html>
<html lang="zh-CN"   xmlns:th="http://www.thymeleaf.org" >
<head  th:replace="~{head::copy(~{::title},_,~{::style},_,_)}" >
    <title>吴江市文教牛津布厂</title>
    <meta name=”description” content="吴江市文教牛津布厂 牛津布厂"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <!-- Bootstrap -->
    <link href="bootstrap/css/bootstrap.css" rel="stylesheet" media="screen">

    <link href="apro/css/carousel.css" rel="stylesheet" media="screen">

    <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" media="screen">
    <script src="jquery/jquery-3.2.1.js"></script>
    <script src="bootstrap/js/bootstrap.js"></script>

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">
    <link href="apro/css/apro.css" rel="stylesheet" media="screen">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="assets/js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="assets/js/ie10-viewport-bug-workaround.js"></script>

    <style type="text/css">


    </style>

</head>
<body>

<div class="c-content">
    <div th:replace="~{navbar::copy}">
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                        aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">吴江市文教牛津布厂</a>
            </div>
            <div id="navbar" class="collapse navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li class="active"><a href="mat.html">我们的产品</a></li>
                    <li><a href="about.html">关于我们</a></li>
                    <li><a href="contact.html">联系我们</a></li>
                    <li><a href="event.html">公司动态</a></li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </nav>
    </div>
    <!--<div class="container">-->

        <!--<ol class="breadcrumb">-->
            <!--<li><a href="index.html">首页</a></li>-->
            <!--<li class="active">联系我们</li>-->
        <!--</ol>-->

    <!--</div>-->


    <div class="container">


        <div class="c-sr-group ">
            <div class="c-sr-search">
                <div class="row">
                    <div class="col-lg-6 c-sr-search-tgroup">
                        <div class="input-group">
                            <input id="keyword" th:value="${keyword}" type="text" class="form-control" placeholder="输入你要查询的名称">
                            <span class="input-group-btn">
                                <button id="searchBtn" class="btn btn-default" type="button">查询</button>
                            </span>
                        </div><!-- /input-group -->
                    </div><!-- /.col-lg-6 -->
                </div>

                <div class="row" style="padding: 0 15px;">
                    <div class="c-sr-category " th:each="entry: ${categorys}" >


                        <div class="c-sr-category-label ">
                            <strong th:text="${entry.key}">布料分类：</strong>
                        </div>
                        <div class="c-sr-category-list ">
                            <ul th:remove="all-but-first">
                                <li th:each="category : ${entry.value}">
                                    <a href="javascript:void(0)" th:text="${category.name}"
                                        th:attr="data-code=${category.code}"
                                       th:alt-title="${category.code}"
                                       th:classappend="${category.code==selectedCategory}? 'category-selected '"

                                       name="categoryLink"

                                    >1680D系列加捻、提花...</a></li>
                                <li><a href="">色织格子箱包布</a></li>
                                <li><a href="">多色彩条帐篷布</a></li>
                                <li><a href="">涤纶弹丝系列</a></li>
                                <li><a href="">色织格子箱包布－客户产品...</a></li>
                                <li><a href="">多色彩条帐篷布－客户产品...</a></li>
                                <li><a href="">1680D系列加捻、提花...</a></li>
                                <li><a href="">色织格子箱包布</a></li>
                                <li><a href="">多色彩条帐篷布</a></li>
                            </ul>


                        </div>


                    </div>
                </div>
            </div>
        </div><!-- /.row -->
    </div>

    <div class="container">
        <div class="marketing c-mat-group" th:remove="all-but-first" >

            <!-- Three columns of text below the carousel -->
            <div class="row" th:remove="all-but-first"  id="matContainer">
                <div class="col-lg-4 col-md-4 c-mat-group-list"
                    th:each="mat : ${page.content}"
                >
                    <a href="mat-detail.html"
                       th:href="@{/portal/mat/detail/${mat.id}}"
                    ><img src="apro/img/blue.jpg"
                          th:src="${mat.imgFile.uri}"
                          alt="Generic placeholder image" width="140" height="140"></a>
                    <h2 th:text="${mat.name}">蓝色布料</h2>
                    <p th:text="${mat.code}">品名：F420菱形格-2</p>
                    <p th:text="${mat.size}">规格：420D*420D</p>
                </div><!-- /.col-lg-4 -->
                <div class="col-lg-4 col-md-4 c-mat-group-list">
                    <a href="mat-detail.html"><img class="" src="apro/img/green.jpg" alt="Generic placeholder image" width="140" height="140"></a>
                    <h2>绿色布料</h2>
                    <p>品名：F420菱形格-2</p>
                    <p>规格：420D*420D</p>
                </div><!-- /.col-lg-4 -->
                <div class="col-lg-4 col-md-4 c-mat-group-list">
                    <a href="mat-detail.html"><img class="" src="apro/img/red.jpg" alt="Generic placeholder image" width="140" height="140"></a>
                    <h2>红色布料</h2>
                    <p>品名：F420菱形格-2</p>
                    <p>规格：420D*420D</p>
                </div><!-- /.col-lg-4 -->
            <!--</div>&lt;!&ndash; /.row &ndash;&gt;-->
            <!--<div class="row">-->
                <div class="col-lg-4 col-md-4 c-mat-group-list">
                    <a href="mat-detail.html"><img class="" src="apro/img/blue.jpg" alt="Generic placeholder image" width="140" height="140"></a>
                    <h2>蓝色布料</h2>
                    <p>品名：F420菱形格-2</p>
                    <p>规格：420D*420D</p>
                </div><!-- /.col-lg-4 -->
                <div class="col-lg-4 col-md-4 c-mat-group-list">
                    <a href="mat-detail.html"><img class="" src="apro/img/green.jpg" alt="Generic placeholder image" width="140" height="140"></a>
                    <h2>绿色布料</h2>
                    <p>品名：F420菱形格-2</p>
                    <p>规格：420D*420D</p>
                </div><!-- /.col-lg-4 -->
                <div class="col-lg-4 col-md-4 c-mat-group-list">
                    <a href="mat-detail.html"><img class="" src="apro/img/red.jpg" alt="Generic placeholder image" width="140" height="140"></a>
                    <h2>红色布料</h2>
                    <p>品名：F420菱形格-2</p>
                    <p>规格：420D*420D</p>
                </div><!-- /.col-lg-4 -->
            </div><!-- /.row -->
        </div><!-- /.container -->

        <div class="container ">

            <div class="row">
                <div class="col-lg-4 col-md-4" style="float: inherit !important; margin: auto">

                    <nav aria-label="Page navigation" style="text-align: center" id="paginationNav">
                        <div th:replace="~{pagination :: copy}">
                        <ul name="pagination" class="pagination">
                            <li>
                                <a name="previous" href="#" aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            <!--<li th:each="i,stat:${#numbers.sequence(0, page.totalPageNumber)}" th:attr="data-page-number=${i}"  >-->
                                <!--<a name="current" href="javascript:void(0)" th:text="${i+1}" th:attr="data-page-number=${i}"-->
                                   <!--th:if="${i<2}" >1</a>-->
                                <!--<a name="more" href="javascript:void(0)" class="active"-->
                                   <!--th:if="${i==2}" >...</a>-->
                            <!--</li>-->
                            <li><a href="#">2</a></li>
                            <li><a href="#">2</a></li>
                            <li><a href="#">3</a></li>
                            <li><a href="#">4</a></li>
                            <li><a href="#">5</a></li>
                            <li>
                                <a name="next" href="#" aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                        </ul>
                        </div>
                    </nav>

                </div>
            </div>

        </div>
    </div>

</div>


<div class="c-toolbar">
    <div class="c-toolbar-tabs">
        <div class="c-toolbar-tab">
            <span class="c-tab-text  ">相册</span>
            <em class="glyphicon glyphicon-chevron-down"></em>
        </div>
    </div>
</div>



<div th:replace="~{footer :: copy}">
    <footer class="footer">
        <div class="container">
            <p class="text-muted">CopyRight © 2006-2010 吴江市文教牛津布厂</p>
            <p class="text-muted">联系电话：0512-63360065  13812691192  13405281040   传真：0512-63369849  地址：吴江市民营开发区八坼镇南刘路</p>
        </div>
    </footer>
</div>


<div  style="display: none;" >

    <div id="template" class="col-lg-4 col-md-4 c-mat-group-list" >
        <a href="mat-detail.html">
            <img class="" alt="Generic placeholder image" width="140" height="140">
        </a>
        <h2>蓝色布料</h2>
        <p>品名：F420菱形格-2</p>
        <p>规格：420D*420D</p>
    </div><!-- /.col-lg-4 -->

</div>

</body>


<script type="text/javascript">

    $(function () {


//        function setCurrent(pageNumber) {
//            $('#pagination').data("currentPageNumber",currentPageNumber);
//        }
//
//        function getCurrent(pageNumber) {
//            $('#pagination').data("currentPageNumber");
//        }


        function set(_key,val,path) {
            var key=_key;
            var queryPath=location.search;
            if(path){
                queryPath=path;
            }
            if(queryPath.indexOf(key+"=")==-1){
                return queryPath+'&'+key+"="+encodeURIComponent(val);
            }else{
                var regex=new RegExp(key+'=[0-9A-Za-z.%]*','g')
                return queryPath.replace(regex,key+"="+encodeURIComponent(val));
            }
        }

        function pageNumberPath(pageNumber,path) {
            var key="pageNumber";
            return set(key,pageNumber,path);
        }


        function categoryPath(category,path) {
            var key="category";
            return set(key,category,path);
        }

        function keywordPath(keyword,path) {
            var key="keyword";
            return set(key,keyword,path);
        }


        function instance(data) {

            var $dom=$('#template').clone();
            $dom.find('img').attr('src',data.imgFile.uri);
            $dom.find('h2').text(data.name);
            $dom.find('p:nth-child(0)').text(data.code);
            $dom.find('p:nth-child(1)').text(data.size);
            return $dom;
        }


        function load(queryPath){
            var qp=queryPath[0]=='?'?queryPath:('?'+queryPath);
            var url=location.href.substring(0,location.href.indexOf(location.pathname))
                +"/api/portal/mat/search"+qp;
            var showUrl=location.href.substring(0,location.href.indexOf(location.pathname))
                +"/api/portal/mat/list"+qp;

            $.ajax({
                url: url,
                type:'GET',
                success: function(data){
                    var $dom=[];
                    var contents=data.data.data;
                    for(var i=0;i<contents.length;i++){
                        var content=contents[i];
                        $dom.push(instance(content));
                    }

                    $('#matContainer').empty();
                    $('#matContainer').html($dom);
                    history.pushState(null,"",showUrl);

                    var paginationUrl=location.href.substring(0,location.href.indexOf(location.pathname))
                        +"/api/portal/mat/pagination?"
                        +"pageNumber="+data.data.pageable.pageNumber
                        +"&totalPageNumber="+data.data.totalPageNumber;

                    $.ajax({
                        url: paginationUrl,
                        type:'GET',
                        success: function(data){

                            $('#paginationNav').empty();
                            $('#paginationNav').html(data);
                            bindClickListener();

                        },
                        error:function(data){

                        }
                    });



                },
                error:function(data){

                }
            });

        }


        function goPageFn(pageNumber) {
//            var pageNumber=$(e.target).data('pageNumber');
            var queryPath=pageNumberPath(pageNumber);
            load(queryPath);
        }



        function bindClickListener() {

            $('a[name=current]').on('click',function (e) {
                var pageNumber=$(e.target).data('pageNumber');
                goPageFn(pageNumber);
            });

            $('a[name=previous]').on('click',function (e) {
                var pageNumber=$(this).data('pageNumber');
                goPageFn(pageNumber);
            });

//            $('a[name=more]')

            $('a[name=next]').on('click',function (e) {
                var pageNumber=$(this).data('pageNumber');
                goPageFn(pageNumber);

            });



        }




        $('#searchBtn').on('click',function () {

            var keyword=$('#keyword').val();
            var queryPath=keywordPath(keyword)
            load(queryPath);
        })

        $('a[name=categoryLink]').on('click',function (e) {
            var category=$(this).data('code');
            var queryPath=categoryPath(category);
            load(queryPath);

            $('a[name=categoryLink]').removeClass('category-selected');
            $(this).addClass('category-selected');

        })

        bindClickListener();
        
        
        function highlight() {


            
        }


    })



</script>


</html>